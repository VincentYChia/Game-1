{
  "CRITICAL_ID_MAPPING": {
    "note": "Recipe outputId MUST match the itemId or materialId of the actual item",
    "materials": "Use 'materialId' field",
    "equipment": "Use 'itemId' field",
    "refined_items": "Use 'itemId' field (ingots, planks, etc.)",
    "example_flow": {
      "recipe": "outputId: 'copper_sword'",
      "must_match": "itemId: 'copper_sword' in items-smithing-2.JSON"
    }
  },

  "RECIPE_TEMPLATE": {
    "smithing": {
      "metadata": {
        "narrative": "Description of what this recipe creates",
        "tags": ["weapon", "sword", "starter"]
      },
      "recipeId": "smithing_copper_sword",
      "outputId": "copper_sword",
      "outputQty": 1,
      "stationTier": 1,
      "stationType": "smithing",
      "gridSize": "3x3",
      "inputs": [
        {
          "materialId": "copper_ingot",
          "quantity": 3
        },
        {
          "materialId": "oak_log",
          "quantity": 1
        }
      ],
      "miniGame": {
        "type": "smithing",
        "difficulty": "easy",
        "baseTime": 30
      }
    },
    "refining": {
      "recipeId": "refining_copper_ore_to_ingot",
      "inputs": [
        {
          "materialId": "copper_ore",
          "quantity": 3
        }
      ],
      "outputs": [
        {
          "materialId": "copper_ingot",
          "quantity": 1,
          "rarity": "common"
        }
      ],
      "stationRequired": "refinery",
      "stationTierRequired": 1,
      "fuelRequired": null,
      "metadata": {
        "narrative": "Smelting copper ore into pure ingots",
        "tags": ["smelting", "metal", "basic"]
      }
    },
    "alchemy": {
      "recipeId": "alchemy_health_potion_minor",
      "outputId": "health_potion_minor",
      "outputQty": 1,
      "stationTier": 1,
      "stationType": "alchemy",
      "sequenceLength": 3,
      "inputs": [
        {
          "materialId": "herb_vitalis",
          "quantity": 2
        },
        {
          "materialId": "water_crystal",
          "quantity": 1
        }
      ],
      "miniGame": {
        "type": "alchemy",
        "difficulty": "easy",
        "baseTime": 25
      }
    },
    "engineering": {
      "recipeId": "engineering_basic_turret",
      "outputId": "basic_turret",
      "outputQty": 1,
      "stationTier": 1,
      "stationType": "engineering",
      "slotCount": 3,
      "inputs": [
        {
          "materialId": "iron_ingot",
          "quantity": 5
        },
        {
          "materialId": "fire_crystal",
          "quantity": 2
        }
      ],
      "miniGame": {
        "type": "engineering",
        "difficulty": "moderate",
        "baseTime": 40
      }
    },
    "adornments": {
      "metadata": {
        "narrative": "Creates an enchantment that can be applied to equipment",
        "tags": ["enchanting", "weapon", "fire"]
      },
      "recipeId": "adornments_fire_enchant_minor",
      "enchantmentId": "fire_enchant_minor",
      "enchantmentName": "Minor Flame",
      "stationTier": 1,
      "stationType": "adornments",
      "gridSize": "3x3",
      "applicableTo": ["weapon", "tool"],
      "effect": {
        "element": "fire",
        "damageValue": [5, 10],
        "damageOverTime": [2, 4],
        "duration": 5,
        "chance": 0.15,
        "conflictsWith": ["ice_enchant_minor", "frost_enchant_minor"]
      },
      "inputs": [
        {
          "materialId": "fire_crystal",
          "quantity": 2
        },
        {
          "materialId": "phoenix_ash",
          "quantity": 1
        }
      ],
      "miniGame": {
        "type": "adornments",
        "difficulty": "easy",
        "baseTime": 30
      }
    }
  },

  "EQUIPMENT_TEMPLATE": {
    "weapons": {
      "metadata": {
        "narrative": "A simple copper blade. Beginners start here.",
        "tags": ["melee", "sword", "starter"]
      },
      "itemId": "copper_sword",
      "name": "Copper Sword",
      "category": "equipment",
      "type": "weapon",
      "subtype": "sword",
      "tier": 1,
      "rarity": "common",
      "range": 1,
      "slot": "mainHand",
      "statMultipliers": {
        "damage": 1.0,
        "attackSpeed": 1.0,
        "durability": 1.0,
        "weight": 1.0
      },
      "requirements": {
        "level": 1,
        "stats": {}
      },
      "flags": {
        "stackable": false,
        "equippable": true,
        "repairable": true
      }
    },
    "armor": {
      "metadata": {
        "narrative": "Basic copper helmet",
        "tags": ["armor", "head", "starter"]
      },
      "itemId": "copper_helmet",
      "name": "Copper Helmet",
      "category": "equipment",
      "type": "armor",
      "subtype": "helmet",
      "tier": 1,
      "rarity": "common",
      "slot": "head",
      "statMultipliers": {
        "defense": 1.0,
        "durability": 1.0,
        "weight": 1.0
      },
      "requirements": {
        "level": 1,
        "stats": {}
      },
      "flags": {
        "stackable": false,
        "equippable": true,
        "repairable": true
      }
    },
    "tools": {
      "metadata": {
        "narrative": "Basic copper pickaxe for mining",
        "tags": ["tool", "pickaxe", "mining"]
      },
      "itemId": "copper_pickaxe",
      "name": "Copper Pickaxe",
      "category": "equipment",
      "type": "tool",
      "subtype": "pickaxe",
      "tier": 1,
      "rarity": "common",
      "range": 1,
      "slot": "mainHand",
      "statMultipliers": {
        "damage": 1.0,
        "mining": 1.0,
        "durability": 1.0,
        "weight": 1.0
      },
      "requirements": {
        "level": 1,
        "stats": {}
      },
      "flags": {
        "stackable": false,
        "equippable": true,
        "repairable": true
      }
    }
  },

  "MATERIAL_TEMPLATE": {
    "raw_materials": {
      "metadata": {
        "narrative": "Common copper ore from surface deposits",
        "tags": ["ore", "metal", "common"]
      },
      "materialId": "copper_ore",
      "name": "Copper Ore",
      "category": "material",
      "type": "ore",
      "subtype": "metal_ore",
      "tier": 1,
      "rarity": "common",
      "stackSize": 256,
      "requirements": {
        "level": 1,
        "stats": {}
      },
      "flags": {
        "stackable": true,
        "consumable": false,
        "repairable": false
      }
    },
    "processed_materials": {
      "metadata": {
        "narrative": "Refined copper ingot ready for crafting",
        "tags": ["metal", "ingot", "processed"]
      },
      "itemId": "copper_ingot",
      "name": "Copper Ingot",
      "category": "material",
      "type": "metal",
      "subtype": "ingot",
      "tier": 1,
      "rarity": "common",
      "stackSize": 256,
      "statMultipliers": {
        "weight": 0.5
      },
      "requirements": {
        "level": 1,
        "stats": {}
      },
      "flags": {
        "stackable": true,
        "consumable": false,
        "repairable": false
      }
    }
  },

  "PLACEMENT_TEMPLATES": {
    "smithing_placement": {
      "recipeId": "smithing_copper_sword",
      "placementMap": {
        "1,1": {"materialId": "copper_ingot", "quantity": 1},
        "2,1": {"materialId": "copper_ingot", "quantity": 1},
        "2,2": {"materialId": "copper_ingot", "quantity": 1},
        "2,3": {"materialId": "oak_log", "quantity": 1}
      },
      "narrative": "Place copper diagonally for blade, oak handle at bottom"
    },
    "refining_placement": {
      "recipeId": "refining_bronze_alloy",
      "coreInputs": [
        {"materialId": "copper_ingot", "quantity": 2}
      ],
      "surroundingInputs": [
        {"materialId": "tin_ingot", "quantity": 1}
      ],
      "narrative": "Copper core with tin surrounding for alloy"
    },
    "alchemy_placement": {
      "recipeId": "alchemy_health_potion_minor",
      "ingredients": [
        {"slot": 1, "materialId": "herb_vitalis", "quantity": 2},
        {"slot": 2, "materialId": "water_crystal", "quantity": 1}
      ],
      "narrative": "Herbs first, then water to extract essence"
    },
    "engineering_placement": {
      "recipeId": "engineering_basic_turret",
      "slots": [
        {"type": "FRAME", "materialId": "iron_ingot", "quantity": 5},
        {"type": "POWER", "materialId": "fire_crystal", "quantity": 2}
      ],
      "narrative": "Iron frame holds fire crystal power source"
    }
  },

  "COMMON_MISTAKES": {
    "id_mismatch": {
      "problem": "Recipe outputId doesn't match item's itemId/materialId",
      "example_wrong": {
        "recipe": "outputId: 'sword_copper'",
        "item": "itemId: 'copper_sword'"
      },
      "example_correct": {
        "recipe": "outputId: 'copper_sword'",
        "item": "itemId: 'copper_sword'"
      }
    },
    "material_vs_item": {
      "problem": "Confusion between materialId and itemId",
      "rule": "Raw materials use materialId, processed/crafted items use itemId",
      "examples": {
        "materialId": ["copper_ore", "iron_ore", "oak_log"],
        "itemId": ["copper_ingot", "iron_ingot", "oak_plank", "copper_sword"]
      }
    },
    "missing_item_definition": {
      "problem": "Recipe outputs item that doesn't exist in item database",
      "solution": "Ensure every outputId has corresponding item definition"
    }
  },

  "DEBUGGING_CHECKLIST": [
    "1. Does recipe outputId exactly match item's itemId?",
    "2. Is the item defined in the correct JSON file?",
    "   - Weapons/Armor/Tools → items-smithing-2.JSON",
    "   - Ingots/Planks/Alloys → items-refining-1.JSON",
    "   - Potions → items-alchemy-1.JSON",
    "   - Devices → items-engineering-1.JSON",
    "3. Are input materialIds correct and exist in materials database?",
    "4. Is stationTier requirement met?",
    "5. Does item have all required fields (itemId, name, category, etc.)?",
    "6. Check for typos in IDs (underscores vs hyphens, singular vs plural)"
  ]
}
